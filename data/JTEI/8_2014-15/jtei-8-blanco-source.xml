<?xml version="1.0" encoding="UTF-8"?>
<?xml-model href="https://github.com/DH-RSE/software-citation/raw/main/schema/tei_jtei_annotated.rng" type="application/xml" schematypens="http://relaxng.org/ns/structure/1.0"?>
<?xml-model href="https://github.com/DH-RSE/software-citation/raw/main/schema/tei_jtei_annotated.rng" type="application/xml" schematypens="http://purl.oclc.org/dsdl/schematron"?>
<TEI xmlns="http://www.tei-c.org/ns/1.0" rend="jTEI">
  <teiHeader>
    <fileDesc>
      <titleStmt>
        <title type="main">ReMetCa: A Proposal for Integrating RDBMS and TEI-Verse</title>
        <author>
          <name>
            <forename>Elena</forename>
            <surname>González-Blanco</surname>
          </name>
          <affiliation>Elena González-Blanco <roleName>teaches</roleName> in the Spanish Literature
            Department at <orgName>Universidad Nacional de Educación a Distancia</orgName> (Open
            University) of Spain in Madrid. Her main research and teaching areas are comparative
            medieval literature, metrics and poetry, and digital humanities. She is the
              <roleName>Director</roleName> of <ref target="http://linhd.uned.es">LINHD</ref>, the
            Digital Humanities Center at UNED, leads the project ReMetCa, and is also the
            coordinator of the linked-data Unedata project at UNED. She is a member of the Executive
            Committee of EADH, member of the first executive committee of GO::DH, member of the
            Clarin Scientific Advisory Board, member of Centernet Executive Committee, and the
            secretary of the Spanish association for digital humanities HDH.</affiliation>
          <email>egonzalezblanco@flog.uned.es</email>
        </author>
        <author>
          <name>
            <forename>José Luis</forename>
            <surname>Rodríguez</surname>
          </name>
          <affiliation>José Luis Rodríguez is a <roleName>systems librarian</roleName> at the
              <orgName>Royal Library</orgName> (Real Biblioteca) in Madrid. He participated in
            projects devoted to building the manuscript catalogs of the Salamanca University Library
            and the Royal Library. He has designed and developed several web applications to manage
            historical bookbinding collections, old inventories of books, exlibris, digital
            libraries, and other historical bibliographic materials. He is an expert in Integrated
            Library Systems and he is currently working with the Koha Open Source ILS. His
            publications include several articles on the history of Galician language, book history,
            and digital humanities. He is a member of the ReMetCa Project.</affiliation>
          <email>jluis.rodriguez@patrimonionacional.es</email>
        </author>
      </titleStmt>
      <publicationStmt>
        <publisher>TEI Consortium</publisher>
        <date>23/09/2015</date>
        <availability>
          <licence target="https://creativecommons.org/licenses/by/4.0/">
            <p>For this publication a Creative Commons Attribution 4.0 International license has
              been granted by the author(s) who retain full copyright.</p>
          </licence>
        </availability>
      </publicationStmt>
      <seriesStmt>
        <title level="j">Journal of the Text Encoding Initiative</title>
        <editor role="guest">Arianna Ciula</editor>
        <editor role="guest">Fabio Ciotti</editor>
        <editor role="chief">John Walsh</editor>
        <editor role="managing">Martin Holmes</editor>
        <editor role="technical">Ron Van den Branden</editor>
        <biblScope unit="issue" n="8">Selected Papers from the 2013 TEI Conference</biblScope>
      </seriesStmt>
      <sourceDesc>
        <p>No source, born digital.</p>
      </sourceDesc>
    </fileDesc>
    <encodingDesc>
      <projectDesc>
        <p>Revues.org -centre for open electronic publishing- is the platform for journals in the
          humanities and social sciences, open to quality periodicals looking to publish full-text
          articles online.</p>
      </projectDesc>
    </encodingDesc>
    <profileDesc>
      <langUsage>
        <language ident="en">en</language>
      </langUsage>
      <textClass>
        <keywords xml:lang="en">
          <term>poetry</term>
          <term>medieval metrics</term>
          <term>repertoire</term>
          <term>RDBMS</term>
          <term>MySQL</term>
          <term>verse</term>
          <term>stanza</term>
        </keywords>
      </textClass>
    </profileDesc>
  </teiHeader>
  <text>
    <front>
      <div type="abstract" xml:id="abstract">
        <p>This paper describes the technical structure of the project ReMetCa (Repertorio Digital
          de Métrica Medieval Castellana), the first online repertoire of Medieval Spanish metrics
          and poetry. ReMetCa is based on the combination of traditional metrical and poetic studies
          (rhythm and rhyme patterns) with digital humanities technology, TEI-XML integrated into a
          Relational Database Management System (RDBMS) through an XMLType field, thus opening up
          the possibility of launching simultaneous searches and queries by using a searchable,
          user-friendly interface. The use of the TEI Verse module to tag metrical and poetic
          structures is especially important for two reasons: first, because it lets us tag
          different kinds of poems with a variable metadata structure, making it possible to express
          a very high level of detail for poetry description that cannot be registered in a
          conventional database; and second, as it enables extensibility and adds more information
          to enrich the conceptual model, which is under constant development.</p>
      </div>
    </front>
    <body>
      <div xml:id="definition">
        <head>The ReMetCa Project: Definition and Scope</head>
        <p><ref target="http://www.remetca.uned.es/">ReMetCa</ref><note><ptr
              target="http://www.remetca.uned.es/"/>.</note> is a computer-based metrical repertoire
          of Medieval Castilian poetry. It gathers all poetic witnesses, from the very beginnings of
          Spanish lyrics at the end of the twelfth century through the rich and varied poetic
          manifestations of the fifteenth and sixteenth century, the
            <soCalled>Cancioneros</soCalled>. When complete, it will include over 10,000 texts and
          offer a systematic metrical analysis of each poem. ReMetCa is the first digital tool to
          analyze Medieval Spanish poetry. It enables users to carry out complex searches in its
          corpus, following the models of other digital resources in the Romance lyrical traditions,
          such as the Galician-Portuguese, Catalan, Italian, or Provençal. ReMetCa is not merely a
          metrical repertoire; it combines metrical schemes together with text analysis as well as
          data sheets with the main philological aspects that characterize the poems. One of its
          most important values is that it is a born-digital project designed to be interoperable
          with other existing poetry databases and digital repertoires, as conceptualized within the
            <ref
            target="http://www.remetca.uned.es/index.php?option=com_content&amp;view=article&amp;id=76:megarep-a-comprehensive-research-tool-in-medieval-and-renaissance-poetic-and-metrical-repertoires&amp;catid=80&amp;Itemid=514&amp;lang=es"
            >Megarep</ref><note><ptr
              target="http://www.remetca.uned.es/index.php?option=com_content&amp;view=article&amp;id=76:megarep-a-comprehensive-research-tool-in-medieval-and-renaissance-poetic-and-metrical-repertoires&amp;catid=80&amp;Itemid=514&amp;lang=es"
            />.</note> project, in which Spanish researchers are already working in collaboration
          with the Hungarian team led by Levente Seláf (<ref type="bibl" target="#blanco14"
            >González-Blanco and Seláf 2014</ref>). The Spanish repertoire is conceived as an
          essential tool to complete the digital European poetic puzzle, enabling users to conduct
          powerful searches in many fields at the same time.</p>
      </div>
      <div xml:id="role">
        <head>The Role of ReMetCa in the European History of Poetic Repertoires</head>
        <p>ReMetCa belongs to the latest generation in a long tradition of metrical repertoires,
          which can be divided into three significant periods based on the different technologies
          used for their construction. The first stage, in which repertoires were published as
          printed books, started at the end of the nineteenth century.<note>With the works of Gaston
            Raynaud (<ref type="bibl" target="#raynaud1884">1884</ref>), Gotthold Naetebus (<ref
              type="bibl" target="#naetebus1891">1891</ref>), and Pillet and Carstens (<ref
              type="bibl" target="#pillet33">1933</ref>), among others.</note> The second period
          started after the Second World War, when repertoires became computer-assisted.<note>With
            the classic work of Frank on Provençal troubadours’ poetry (<ref type="bibl"
              target="#frank53">Frank 1953–57</ref>); it has continued with the editions of printed
            metrical repertoires, in Old French lyrics by Mölk and Wolfzettel (<ref type="bibl"
              target="#molk72">1972</ref>), in Italian by Solimena (<ref type="bibl"
              target="#solimena80">1980</ref>), Antonelli (<ref type="bibl" target="#antonelli84"
              >1984</ref>), Pagnotta (<ref type="bibl" target="#pagnotta95">1995</ref>), Zenari
              (<ref type="bibl" target="#zenari99">1999</ref>), Solimena (<ref type="bibl"
              target="#solimena00">2000</ref>), and Gorni (<ref type="bibl" target="#gorni08"
              >2008</ref>); in the Hispanic Peninsula by Tavani (<ref type="bibl" target="#tavani67"
              >1967</ref>), Parramon i Blasco (<ref type="bibl" target="#parramon92">1992</ref>),
            Gómez-Bravo (<ref type="bibl" target="#gomezbravo99">1999</ref>), and Betti (<ref
              type="bibl" target="#betti05">2005</ref>); in German by Touber (<ref type="bibl"
              target="#touber75">1975</ref>) and Brunner, Wachinger, and Klesatschke (<ref
              type="bibl" target="#brunner86">1986–2007</ref>).</note> Technological advance has
          made it possible to create a third generation of repertoires, available online and
          searchable through the web, in which research time has been considerably reduced by richer
          search capabilities and the accessibility of online interfaces, especially compared with
          the complexity of printed indexes and lists of metrical schemes. The first online digital
          poetic repertoire was the <!-- [RvdB] consistency: some are italic, others not? --><ref
            target="http://rpha.elte.hu/"><title level="m">RPHA: Répertoire de la Poésie hongroise
              ancienne jusqu’à 1600</title></ref> (<ref type="bibl" target="#horvath91">Horváth
            1991–</ref>); Galician researchers created <ref
            target="http://www.cirp.es/bdo/med/meddb.html">MedDB: Base de datos da Lírica profana
            galego-portuguesa</ref> (<ref type="bibl" target="#brea94">Brea et al. 1994–</ref>);
          Italian researchers digitalized <ref target="http://www.bedt.it/"><title level="m">BEdT:
              Bibliografia Elettronica dei Trovatori</title></ref> (<ref type="bibl"
            target="#asperti">Asperti et al.</ref>); the <ref
            target="http://www.nouveaunaetebus.elte.hu/">Nouveau Naetebus</ref> (<ref type="bibl"
            target="#selaf">Seláf</ref>), the <ref target="http://csm.mml.ox.ac.uk/"><title
              level="m">Oxford Cantigas de Santa María Database</title></ref> (<ref type="bibl"
            target="#parkinson">Parkinson</ref>), <ref
            target="http://webserver.erwin-rauner.de/crophius/Analecta_conspectus.htm">the <title
              level="m">Analecta Hymnica Digitalia</title></ref> (<ref type="bibl" target="#rauner"
            >Rauner</ref>), and the <ref target="http://www.liederenbank.nl/index.php?lan=en"><title
              level="m">Dutch Song Database</title></ref> (<ref type="bibl" target="#grijp"
            >Grijp</ref>) all appeared later.<note>For the URLs and other details, see
              <soCalled>Repertoires and Digital Databases</soCalled> in the bibliography
            below.</note> Most of these repertoires are built on relational databases; some of them
          are open source, but the majority are built on proprietary software. Some of them were
          previously published as books and later as CDs, but now almost every project has developed
          an online version. The technical description of these resources is not the topic of this
          paper, but it will be studied in depth in a later stage of the project, as further
          possibilities for interoperability are analyzed.</p>
      </div>
      <div xml:id="stateoftheart">
        <head>The State of the art in Spain</head>
        <p>Compared with the European tradition described above, the Spanish panorama looks weak, as
          we do not have a published poetic repertoire which gathers the metrical patterns of
          Medieval Castilian poetry (except for the book by Gómez-Bravo [<ref type="bibl"
            target="#gomezbravo99">1999</ref>], restricted to <soCalled>Cancionero</soCalled>
          poetry, which only covers the fifteenth century, but not the poems written during the
          thirteenth and fourteenth centuries), and, until now, there was no digital resource
          available. However, researchers are nowadays more conscious of the importance of metrical
          studies for the analysis and understanding of Medieval Spanish poetry, as has been
          recently shown.<note>Some examples are the publications of Domínguez Caparrós (<ref
              type="bibl" target="#caparros85">1985</ref> and <ref type="bibl" target="#caparros88"
              >1988</ref>), Micó (<ref type="bibl" target="#mico09">2009</ref>), Gómez Redondo (<ref
              type="bibl" target="#redondo01">2001</ref>), García Calvo (<ref type="bibl"
              target="#calvo06">2006</ref>), Duffell (<ref type="bibl" target="#duffell07"
              >2007</ref>), Beltrán (<ref type="bibl" target="#beltran07">2007</ref>) or
            González-Blanco (<ref type="bibl" target="#blanco10">2010</ref>).</note> On the other
          hand, metrical studies have flourished thanks to the creation of specialized journals,
          such as <ref target="http://e-spacio.uned.es/revistasuned/index.php/rhythmica"><title
              level="m">Rhythmica. Revista española de métrica comparada</title></ref>,<note><ptr
              target="http://e-spacio.uned.es/revistasuned/index.php/rhythmica"/>.</note> available
          online, and <ref target="http://www.arsmetrica.eu/">Ars Metrica</ref>,<note><ptr
              target="http://www.arsmetrica.eu/"/>.</note> born as an electronic journal whose
          scientific committee is composed of researchers from universities and centers in different
          countries.</p>
        <p>At this point, ReMetCa’s aim is to fill the Spanish gap with information in order to
          build a metrical repertoire within this complex puzzle of digital European poetry, but the
          objective of the project in its future stages is to design a system—to be based on the TEI
          model, but integrating linked data technologies—which allows interoperability, information
          exchange, and combined searches across the different repertoires and databases.</p>
      </div>
      <div xml:id="conceptualschema">
        <head>The Conceptual Schema of ReMetCa</head>
        <p>The description of ReMetCa’s structure starts with the definition of a conceptual model
          based on the domain of medieval metrics. Its global structure is synthesized into a
          relational database, which will be exportable in the future to full TEI in order to
          facilitate data interchange and interoperability with other projects and systems. For the
          moment, TEI is restricted to tagging metrical and poetic phenomena by using the TEI Verse
          module in only one of the database fields. Although there are many possible ways to
          structure such a database, our proposed model takes into account the elements we need to
          describe and analyze our field of study. For the graphical representation we use a light
          version of UML (Unified Modeling Language). Entity names and their attributes are shown as
          boxes, and these are connected by lines which represent the existing relationships among
          them, together with numbers to show cardinality.</p>
        <figure xml:id="figure1">
          <graphic url="images/jtei-8-blanco-figure-01-conceptual-model.png" height="858px"
            width="698px"/>
          <head type="legend">Conceptual model</head>
        </figure>
      </div>
      <div xml:id="logicalschema">
        <head>The Logical Schema: Modeling the Database E-R Model</head>
        <p>The conceptual model of entities, attributes, and relationships is transformed into an
          Entity-Relationship model after applying the transformation rules that convert it into a
          database.</p>
        <figure xml:id="figure2">
          <graphic url="images/jtei-8-blanco-figure-02-logical-model.png" height="1380px"
            width="986px"/>
          <head type="legend">Logical Model</head>
        </figure>
        <p>The relationships established among entities can be <soCalled>one-to-many</soCalled> or
            <soCalled>many-to-many</soCalled>. In the first category you can find the relationship
          between <ident>obraCompleta</ident> (literary work) and <ident>refHismetca</ident>
          (Classification System). As one <ident>refHismetca</ident> may be shown in many different
          literary works, the solution given in the ER model is to define a table for
            <ident>refHismetca</ident> with at least two attributes: one to identify the
            <ident>refHismetca</ident>, and the other to name it. For the entity
            <ident>obraCompleta</ident> (literary work), our database has a field with a foreign key
          which points to the <ident>id</ident> field of the genre table [refHismetca]. The second
          type of relationship, many-to-many, is larger. It is necessary to create a third table to
          contain each of them. This happens, for example, in order to express the relationship
          between topics and poems, whose third entity consists of as many tuples as there are
          topics assigned to each poem. Every tuple has at least two attributes to identify
            <ident>poema</ident> (poem) and <ident>tema</ident> (topic). A similar situation happens
          with the entity <ident>bibliografía</ident> (bibliography), whose third entity is called
            <ident>referencias</ident>.</p>
        <p>The structure described above covers the majority of entities in our relational database
          model. Some problems arise when entering entities with a complex textual description, such
          as the terms used to describe parts of the literary work. <ident>Poema</ident> (poem),
            <ident>estrofa</ident> (stanza), and <ident>verso</ident> (line) are the components that
          define the hierarchical structure of each literary work analyzed. Applying the previously
          described E-R model would drive us into a complex model of relationships among those
          components which are very difficult to represent in a database. These relationships are
          created through composition, which means that the entity <ident>poema</ident> is composed
          of one or more entities <ident>estrofa</ident>, and the entity <ident>estrofa</ident>
          consists of one or more entities <ident>verso</ident>. The relations of multiplicity among
          the components vary from one work to another, depending on the number of stanzas and lines
          in each entity. For example, a sonnet shows a multiplicity of 1 for each stanza contained
          by it (i.e., each stanza is part of only one sonnet), and the stanza has a multiplicity of
          4 in relation to the sonnet (the sonnet contains four stanzas). The problem of
          representing this composition in an E-R model is that the representation is data-centered,
          and it does not work for poem, line, and stanza, as these components need to be analyzed
          as textual items. It is necessary to insert metadata into these textual items to show
          their compositional relation and to add other relevant information to them. The E-R model
          is inappropriate for this purpose due to its center-based structure, with the entities of
          poem, line, and stanza in the middle of its referential domain of study.</p>
        <p>The difficulties described above remain in each stage of the project and reappear in the
          programming phase and when designing the different web components, both in the
          administrative part of the project (for aspects related to the creation, modification, and
          deletion of registers) and in its querying module. Also, the structure of each of the
          three components mentioned (poem, stanza, and line) differs significantly depending on the
          literary work, as there are different kinds of poems, stanzas, and lines. For example,
          some of the poems are monostrophic, whereas others are composed of several different
          stanzas. Lines may be rhymed or unrhymed, may be inserted into a strophic structure or
          not, may form part of a series of compositions, or may constitute a literary composition
          themselves. From a technical point of view, all of them could be considered
            <soCalled>semi-structured data</soCalled>.</p>
      </div>
      <div xml:id="teiverse">
        <head>The Addition of XML Tagging: The Verse Module of TEI P5</head>
        <p>This hierarchical and semi-structured pattern is quite ungainly for an E-R database
          model, which is not flexible enough to show hierarchical structures. For this reason,
          using an XML-based markup language, such as TEI, is the perfect solution to show all the
          complex relations and properties. As the ReMetCa model is built on a database which works
          very well in terms of structure to describe the main fields of our projects, TEI is just
          used for tagging entities and relationships that cannot be represented in the database
          structure because of the complexity and diversity of the contents of the texts included,
          in terms of metrical definitions and properties. We have selected only the tags of the
          Verse module of the TEI P5 Guidelines, as this module works perfectly to show the
          hierarchy and properties needed, which may vary depending on the type of poem. Here is an
          example: <figure xml:id="example1">
            <egXML xmlns="http://www.tei-c.org/ns/Examples">
              <lg type="estrofa" subtype="redondilla" asonancia="consonante" met="8,8,8,8"
                rhyme="cddc">
                <l n="36">Guía al hijo y a la m<rhyme label="c">adre</rhyme>,</l>
                <l n="37">guía al viejo pecad<rhyme label="d">or</rhyme>,</l>
                <l n="38">que se parte sin tem<rhyme label="d">or</rhyme></l>
                <l n="39">a donde manda Dios p<rhyme label="c">adre</rhyme>;</l>
              </lg>
              <lg type="estrofa" asonancia="consonante" met="8,8" rhyme="+b+a">
                <note>estos dos versos son de vuelta</note>
                <l n="40">y pues al niño bend<rhyme label="b">ito</rhyme></l>
                <l n="41" rhyme="aste">y a nosotros tú sac<rhyme label="a">aste</rhyme>,</l>
                <lg type="estribillo" asonancia="consonante" met="8,8,8" rhyme="*a*b*b">
                  <l n="42">Ángel, tú que me mand<rhyme label="a">aste</rhyme></l>
                  <l n="43">de Judea ir a Eg<rhyme label="b">ipto</rhyme>,</l>
                  <l n="44">guíanos con el chiqu<rhyme label="b">ito</rhyme>.</l>
                </lg>
                <!-- lg are nested because "estribillo" belongs to the stanza but it needs 
                        to be marked as an indepent structure -->
              </lg>
            </egXML>
            <head type="legend"><title level="m">Auto de la huida a Egipto</title>, escena III, vv.
              36–44</head>
          </figure>
        </p>
        <p>We have designed a TEI customization based on the TEI Verse module and represented as an
          XML Schema (<ident>.xsd</ident>) which includes the following tags and attributes: <list
            rend="bulleted">
            <item>The stanza, marked with the <gi>lg</gi> tag, is our highest tagging level and
              bears the following attributes: <list rend="bulleted">
                <item><att>type</att> describes the function of the stanza in the poem and may have
                  one of three values, <val>estrofa</val>, <val>estribillo</val>, or
                    <val>cabeza</val>, depending on its function: a normal stanza, a chorus, or the
                  head position of the poem (which is usually repeated with variations).</item>
                <item><att>subtype</att> contains the name of the stanza form (e.g.,
                    <val>soneto</val>, <val>cuadernavia</val>, <val>tirada</val>,
                  <val>romance</val>, <val>zéjel</val>), provided it has a standardized name in the
                  poetic tradition. The classification of the terms is gathered in a controlled
                  vocabulary registered in the guidelines established by ReMetCa. If there is no
                  known conventional name (which happens in many cases), the attribute may not
                  appear.</item>
                <item><att>n</att> contains the number of the stanza as per the print edition on
                  which our digital editions are based. Since the transcriptions of the texts we use
                  are not complete, it is necessary to number the lines in order to make references
                  to other editions.</item>
                <item><att>met</att> contains the metrical structure, based on the number of
                  syllables in each line and on the number of lines, separated by commas. A stanza
                  of four lines of octosyllables would be encoded as
                  <code>met="8,8,8,8"</code>.</item>
                <item><att>rhyme</att> contains the rhyming structure of each stanza, represented by
                  letters, as for example in <code>rhyme="abba"</code>, to show that the first and
                  fourth lines have the same rhymes and so do the second and third.</item>
                <item><att>asonancia</att> is a new attribute which does not exist in the TEI Verse
                  module and has been added to our schema. Although our philosophy is to respect and
                  follow the TEI Guidelines (<ref type="bibl" target="#tei13">TEI Consortium
                    2013</ref>), we have felt obliged to introduce three new attributes. This one
                  indicates the two possible values of the rhyming typology: <val>asonante</val>
                  (which means that only vowel sounds are repeated at the end of two rhyming lines),
                  and <val>consonante</val> (which means that every sound after the stressed
                  syllable is repeated). The second added attribute is <att>unisonancia</att>, which
                  takes the values of either <val>unisonante</val> or <val>singular</val> and shows
                  whether the same rhyme scheme is repeated in different stanzas (unisonante:
                    <code>abba</code>, <code>abba</code>) or not (singular: <code>abba</code>,
                    <code>cddc</code>). The third new attribute is <att>isometrismo</att>, which
                  takes the values of either <val>isométrico</val> or <val>heterométrico</val>,
                  which indicates whether all the descendant stanzas have the same number of
                  syllables (<val>isométrico</val>) or not (<val>heterométrico</val>).</item>
              </list>
            </item>
            <item>The element <soCalled>line</soCalled>, <gi>l</gi>, a child of <gi>lg</gi>, is a
              mixed element which contains the child element <gi>rhyme</gi> to mark the rhyming
              string of the line which is pronounced after the stressed vowel, and one attribute,
                <att>n</att>, which marks the line number, following the same principles as those
              indicated by the same attribute described at <gi>lg</gi>.</item>
          </list>
        </p>
      </div>
      <div xml:id="extending">
        <head>Possibilities for Extending our TEI Schema</head>
        <p>As the ReMetCa project was initially built as a relational model, the only TEI component
          that has been added to its data model is the Verse module. However, in the future there
          will be more TEI markup additions to reflect the need for gathering more information on
          the different manuscripts witnessing each poem. Our team is analyzing the possibility of
          replacing the manuscript table with the element <gi>msDesc</gi>. The reasons for this
          decision derive from the complexity of describing many different witnesses, each of them
          with complex relations to many collections, libraries, owners, and copyists. Following the
          E-R model would force us to multiply the number of tables in order to be able to reflect
          the complexity; therefore, using a model based on XML would ease our work by offering both
          exhaustiveness and flexibility, but this advantage is counterbalanced by the scale of
          changes that would be required in order to introduce XQuery functionality to the system,
          so each decision to change in this way has to be taken gradually and carefully.</p>
      </div>
      <div xml:id="physicalmodel">
        <head>The Physical Model</head>
        <p>Once the logical model is established, the next task was to implement the selected schema
          into a database management system, what is known as the <soCalled>physical
            model</soCalled>. (<ref type="bibl" target="#silberschatz02">Silberschatz 2002:
          40</ref>) As far as the selection of the system is concerned, native XML databases, such
          as eXist or BaseX, were discarded since we wanted to preserve the original relational
          structure of our logical system, and also because we considered it interesting to use an
          RBDMS model, seeing that most of the online repertoires are built on similar systems. The
          problem lay in choosing a combined system to integrate both types of information: E-R
          relational structures and text marked up with XML. We compared two of the most popular E-R
          database systems: <ptr type="software" xml:id="MySQL" target="#MySQL"/><rs
            type="soft.name" ref="#MySQL">MySQL</rs> and Oracle9i XML. Both of them offered the
          possibility of adding an XMLType data column, thus offering the possibility of introducing
          hierarchical structures inside the relational model via the provision of XML nesting
          structures. The combination of both systems offers great advantages, such as the
          possibility of making combined queries with <ptr type="software" xml:id="SQL"
            target="#SQL"/><rs type="soft.name" ref="#SQL">SQL</rs> and XPath languages.<note>The
            disadvantage of <ptr type="software" xml:id="MySQL" target="#MySQL"/><rs
              type="soft.name" ref="#MySQL">MySQL</rs> compared to Oracle is that <ptr
              type="software" xml:id="MySQL" target="#MySQL"/><rs type="soft.name" ref="#MySQL"
              >MySQL</rs> does not offer validation for XML fields, as it considers them just as
            text fields, and there are no added XSD schemas or any kind of transformational
            stylesheets, like <ptr type="software" xml:id="XSLT" target="#XSLT"/><rs
              type="soft.name" ref="#XSLT">XSLT</rs>. TEI code has to be composed and validated
            outside the database by using XML editors (we use Oxygen), since the <ptr
              type="software" xml:id="MySQL" target="#MySQL"/><rs type="soft.name" ref="#MySQL"
              >MySQL</rs> RDBMS exploitation of XML technologies is limited to XPath and can only be
            recovered through the <ident>extractValue</ident> function of <ptr type="software"
              xml:id="MySQL" target="#MySQL"/><rs type="soft.name" ref="#MySQL">MySQL</rs>, which
            shows important limitations. Oracle Database 9i and 10g, however, are much more powerful
            in that sense, as they combine their E-R nature with XML technologies, resulting in a
            much more advanced tool to work with both systems, hierarchical and relational, at the
            same time.</note></p>
        <p>This first trial model of ReMetCa, combining the <ptr type="software" xml:id="MySQL"
            target="#MySQL"/><rs type="soft.name" ref="#MySQL">MySQL</rs> RDBMS and TEI XML fields,
          is already working online and can be visited at <ptr target="http://ww.remetca.uned.es"/>.
          To access the database, it is necessary to log in to <soCalled>Área de trabajo</soCalled>
          and then into <soCalled>base de datos</soCalled>, using a username and password that can
          be requested from the same website. Eventually the search screen will be online, free and
          open with no password, but not yet, as we are still working on populating the database and
          designing the search engine.</p>
        <p>Oracle databases contain fields defined as <ident>XMLType</ident>, thanks to the XDB
          component. This component is usually installed by default, but its status can be checked
          by using the following <ptr type="software" xml:id="SQL" target="#SQL"/><rs
            type="soft.name" ref="#SQL">SQL</rs> statement: <eg><![CDATA[
            SQL> select comp_name, status from dba_registry where comp_name=’Oracle XML Database’;
            COMP_NAME
            ----------------------------------------------------------------------------------------------
            STATUS
            ----------------------------------------------------------------
            Oracle XML Database
            VALID
          ]]></eg>
        </p>
        <p>In the case of ReMetCa, this <ident>XMLType</ident> field needs to appear only once, in
          the table <ident>Poema</ident>, which contains <gi>lg</gi> elements and their content, as
          described above. Oracle <ptr type="software" xml:id="SQL" target="#SQL"/><rs
            type="soft.name" ref="#SQL">SQL</rs> Developer also allows updates to contents with its
          unique record view.</p>
        <figure xml:id="figure3">
          <graphic url="images/jtei-8-blanco-figure-03-oracle-editor.png" height="555px"
            width="626px"/>
          <head type="legend">Oracle <ptr type="software" xml:id="SQL" target="#SQL"/><rs
              type="soft.name" ref="#SQL">SQL</rs> Developer</head>
        </figure>
        <p>Oracle stores XSD schemas into its system, so the XML introduced is validated. To test
          this property, we tried introducing an XSD schema for this <gi>lg</gi> element, adding
          attributes and constraints, and as figure 4 shows, it was perfectly validated. The system
          also accepts <ptr type="software" xml:id="XSLT" target="#XSLT"/><rs type="soft.name"
            ref="#XSLT">XSLT</rs> stylesheets. Oracle registers stylesheets and can apply them to
          any XMLType field.</p>
        <figure xml:id="figure4">
          <graphic url="images/jtei-8-blanco-figure-04-oracle-validation.png" height="284px"
            width="608px"/>
          <head type="legend">Schema validation error</head>
        </figure>
        <p>Finally, it is important to create an index for XML elements to test the performance of
          the database.</p>
        <figure xml:id="figure5">
          <graphic url="images/jtei-8-blanco-figure-05-oracle-index.png" height="49px" width="556px"/>
          <head type="legend">Index of verses</head>
        </figure>
      </div>
      <div xml:id="conclusion">
        <head>Conclusion</head>
        <p>As described above, the ReMetCa project is under constant development. As our textual
          corpus grows, the initial schema has to be adjusted to its needs. We are working to expand
          the technical model and to make it capable of describing the complex panorama of Medieval
          Spanish poetry. During the next stages of the project, more TEI modules and elements will
          be added in order to complete some of the sections that are not yet satisfactorily
          described by the E-R model in the database, and also to make it possible to export all the
          database contents to full TEI. A further stage will consist of working on a linked-data
          model to allow interoperability among the different European repertoires based on a common
          ontology.</p>
        <p>Although we have adopted Oracle because of its power to work with XML technologies and
          TEI, there are other open-source systems like <ptr type="software" xml:id="MySQL"
            target="#MySQL"/><rs type="soft.name" ref="#MySQL">MySQL</rs> or PostgreSQL which offer
          enough functions to implement a mixed system like the one proposed in this paper.
          Actually, it is predictable that both systems will include similar tools in the future to
          work with XMLType fields, as XML is becoming more and more widely used.</p>
      </div>
    </body>
    <back>
      <div type="bibliography">
        <listBibl>
          <head>Bibliography on Metrical Studies</head>
          <bibl xml:id="beltran07"><author>Beltrán, Vicenç</author>. <date>2007</date>. <title
              level="a">Bibliografía sobre Poesía medieval y Cancioneros</title>. In <title
              level="m">Biblioteca Virtual Joan Lluís Vives.</title> Accessed 5 February, 2014. <ptr
              target="http://www.lluisvives.com/FichaObra.html?Ref=25467&amp;portal=1"/>.</bibl>
          <bibl xml:id="caparros85"><author>Domínguez Caparrós, José</author>. <date>1985</date>.
              <title level="m">Diccionario de métrica española</title>. <pubPlace>Madrid</pubPlace>:
              <publisher>Paraninfo</publisher>.</bibl>
          <bibl xml:id="caparros88"><author>Domínguez Caparrós, José</author>. <date>1988</date>.
              <title level="m">Contribución a la bibliografía de los últimos treinta años sobre la
              métrica española</title>. <pubPlace>Madrid</pubPlace>:
            <publisher>C.S.I.C.</publisher></bibl>
          <bibl xml:id="duffell07"><author>Duffell, Martin J.</author>
            <date>2007</date>. <title level="m">Syllable and Accent: Studies on Medieval Hispanic
              Metrics</title>. <series>Papers of the Medieval Hispanic Research Seminar</series>
            <biblScope unit="volume">56</biblScope>. <pubPlace>London</pubPlace>:
              <publisher>Department of Hispanic Studies, Queen Mary and Westfield College,
              University of London</publisher>.</bibl>
          <bibl xml:id="calvo06"><author>García Calvo, Agustín</author>. <date>2006</date>. <title
              level="m">Tratado de Rítmica y Prosodia y de Métrica y Versificación</title>.
              <pubPlace>Zamora</pubPlace>: <publisher>Lucina</publisher>.</bibl>
          <bibl xml:id="redondo01"><author>Gómez Redondo, Fernando</author>. <date>2001</date>.
              <title level="m">Artes Poéticas Medievales</title>. <pubPlace>Madrid</pubPlace>:
              <publisher>Laberinto</publisher>.</bibl>
          <bibl xml:id="blanco10"><author>González-Blanco García, Elena</author>. <date>2010</date>.
              <title level="m">La cuaderna vía española en su marco panrománico</title>.
              <pubPlace>Madrid</pubPlace>: <publisher>FUE</publisher>.</bibl>
          <bibl xml:id="blanco14"><author>González-Blanco García, Elena</author> and <author>Levente
              Seláf</author>. <date>2014</date>. <title level="a"><title level="m">Megarep</title>:
              A Comprehensive Research Tool in Medieval and Renaissance Poetic and Metrical
              Repertories</title>. In <title level="m">Humanitats a la xarxa: món medieval /
              Humanities on the Web: The Medieval World</title>, edited by <editor>Lourdes
              Soriano</editor>, <editor>Helena Rovira</editor>, <editor>Marion Coderch</editor>,
              <editor>Glòria Sabaté</editor>, and <editor>Xavier Espluga</editor>,
              <biblScope>321–32</biblScope>. <pubPlace>Oxford</pubPlace>: <publisher>Peter
              Lang</publisher>.</bibl>
          <bibl xml:id="mico09"><author>Micó, José María</author>. <date>2009</date>. <title
              level="m">Bibliografía para una historia de las formas poéticas en España</title>.
            Biblioteca Virtual Miguel de Cervantes: Alicante. Accessed February 5, 2014. <ptr
              target="http://www.cervantesvirtual.com/nd/ark:/59851/bmc1g127"/>.</bibl>
          <bibl xml:id="silberschatz02"><author>Silberschatz, Abraham</author> (et al.).
              <date>2002</date>. <title level="m">Fundamentos de Bases de datos</title>,
              <pubPlace>Madrid</pubPlace>: <publisher>Mc Graw Hill</publisher>.</bibl>
          <bibl xml:id="tei13"><orgName>TEI Consortium</orgName>. <date>2013</date>. <title
              level="m">TEI P5: Guidelines for Electronic Text Encoding and Interchange</title>.
              <edition>Version 2.5.0</edition>. Last updated July 26. <pubPlace>N.p.</pubPlace>:
              <publisher>TEI Consortium</publisher>. <ptr
              target="http://www.tei-c.org/Vault/P5/2.5.0/doc/tei-p5-doc/en/html/"/>.</bibl>
        </listBibl>
        <listBibl>
          <head>Metrical Repertoires Published in Print</head>
          <bibl xml:id="antonelli84"><author>Antonelli, Roberto</author>. <date>1984</date>. <title
              level="m">Repertorio metrico della scuola poetica siciliana</title>.
              <pubPlace>Palermo</pubPlace>: <publisher>Centro di Studi Filologici e Linguistici
              Siciliani</publisher>.</bibl>
          <bibl xml:id="betti05"><author>Betti, Maria Pia</author>. <date>2005</date>. <title
              level="m">Repertorio Metrico delle Cantigas de Santa Maria di Alfonso X di
              Castiglia.</title>. <pubPlace>Ospedaletto (Pisa)</pubPlace>:
              <publisher>Pacini</publisher>.</bibl>
          <bibl xml:id="brunner86"><editor>Brunner, Horst</editor>, <editor>Burghart
              Wachinger</editor>, and <editor>Eva Klesatschke</editor>, eds. <date>1986–2007</date>.
              <title level="m">Repertorium der Sangsprüche und Meisterlieder des 12. bis 18.
              Jahrhunderts</title>. <pubPlace>Tübingen</pubPlace>:
            <publisher>Niemeyer</publisher>.</bibl>
          <bibl xml:id="frank53"><author>Frank, István</author>. <date>1953–57</date>. <title
              level="m">Répertoire métrique de la poésie des troubadours</title>.
              <pubPlace>Paris</pubPlace>: <publisher>H. Champion</publisher>.</bibl>
          <bibl xml:id="gomezbravo99"><author>Gómez-Bravo, Ana María</author>. <date>1999</date>.
              <title level="m">Repertorio métrico de la poesía cancioneril del siglo XV</title>.
              <pubPlace>Alcalá de Henares</pubPlace>: <publisher>Universidad</publisher>.</bibl>
          <bibl xml:id="gorni08"><author>Gorni, Guglielmo</author>. <date>2008</date>. <title
              level="m">Repertorio metrico della canzone italiana dalle origini al Cinquecento
              (REMCI)</title>. <pubPlace>Florence</pubPlace>: <publisher>Franco
            Cesati</publisher>.</bibl>
          <bibl xml:id="molk72"><author>Mölk, Ulrich</author>, and <author>Friedrich
              Wolfzettel</author>. <date>1972</date>. <title level="m">Répertoire métrique de la
              poésie lyrique française des origines à 1350</title>. <pubPlace>Munich</pubPlace>:
              <publisher>W. Fink Verlag</publisher>.</bibl>
          <bibl xml:id="naetebus1891"><author>Naetebus, Gotthold</author>. <date>1891</date>. <title
              level="m">Die Nicht-Lyrischen Strophenformen des Altfranzösischen. Ein Verzeichnis
              Zusammengestellt und Erläutert</title>. <pubPlace>Leipzig</pubPlace>: <publisher>S.
              Hirzel</publisher>.</bibl>
          <bibl xml:id="pagnotta95"><author>Pagnotta, Linda</author>. <date>1995</date>. <title
              level="m">Repertorio metrico della ballata italiana: secoli XIII e XIV</title>.
              <pubPlace>Milan</pubPlace>: <publisher>Ricciardi</publisher>.</bibl>
          <bibl xml:id="parramon92"><author>Parramon i Blasco, Jordi</author>. <date>1992</date>.
              <title level="m">Repertori mètric de la poesia catalana medieval</title>.
              <pubPlace>Barcelona</pubPlace>: <publisher>Curial, Abadia de
            Montserrat</publisher>.</bibl>
          <bibl xml:id="pillet33"><author>Pillet, Alfred</author>, and <author>Henry
              Carstens</author>. <date>1933</date>. <title level="m">Bibliographie der
              Troubadours</title>. <pubPlace>Halle</pubPlace>: <publisher>M.
            Niemeyer</publisher>.</bibl>
          <bibl xml:id="raynaud1884"><author>Raynaud, Gaston</author>. <date>1884</date>. <title
              level="m">Bibliographie des chansonniers français des xiii e [treizième] et xiv e
              [quatorzième] siècles: comprenant la description de tous les manuscrits, la table des
              chansons classées par ordre alphabétique de rimes et la liste des trouvères</title>. 2
            vols. <pubPlace>Paris</pubPlace>: <publisher>Vieweg</publisher>.</bibl>
          <bibl xml:id="solimena80"><author>Solimena, Adriana</author>. <date>1980</date>. <title
              level="m">Repertorio metrico dello Stil novo</title>. <pubPlace>Rome</pubPlace>:
              <publisher>Presso la Società</publisher>.</bibl>
          <bibl xml:id="solimena00"><author>Solimena, Adriana</author>. <date>2000</date>. <title
              level="m">Repertorio metrico dei poeti siculo-toscani</title>.
              <pubPlace>Palermo</pubPlace>: <publisher>Centro di studi filologici e linguistici
              siciliani</publisher>.</bibl>
          <bibl xml:id="tavani67"><author>Tavani, Giuseppe</author>. <date>1967</date>. <title
              level="m">Repertorio metrico della lirica galego-portoghese</title>.
              <pubPlace>Rome</pubPlace>: <publisher>Edizioni dell’Ateneo</publisher>.</bibl>
          <bibl xml:id="touber75"><author>Touber, Anton H.</author>
            <date>1975</date>. <title level="m">Deutsche Strophenformen des Mittelalters</title>.
              <pubPlace>Stuttgart</pubPlace>: <publisher>Metzler</publisher>.</bibl>
          <bibl xml:id="zenari99"><author>Zenari, Massimo</author>. <date>1999</date>. <title
              level="m">Repertorio metrico dei <soCalled>Rerum vulgarium fragmenta</soCalled> di
              Francesco Petrarca</title>. <pubPlace>Padova</pubPlace>:
              <publisher>Antenore</publisher>.</bibl>
        </listBibl>
        <listBibl>
          <head>List of Digital Repertoires and Databases</head>
          <bibl xml:id="asperti"><author>Asperti, Stefano</author>, <author>Fabio Zinelli</author>,
            et al. <title level="m">BEdT, Bibliografia Elettronica dei Trovatori</title>. Sapienza
            Università di Roma, Dipartimento Studi greco-latini, italiani, scenico-musicali.
            Accessed February 5, 2014. <ptr target="http://www.bedt.it/"/>.</bibl>
          <bibl xml:id="brea94"><author>Brea, Mercedes</author>, et al. 1994–. <title level="m"
              >MedDB: Base de datos da Lírica Profana Galego-Portuguesa</title>. Centro Ramón
            Piñeiro para a Investigación en Humanidades. Accessed February 5, 2014. <ptr
              target="http://www.cirp.es/bdo/med/meddb.html"/>.</bibl>
          <!-- [RvdB] no references in text -->
          <bibl xml:id="dreves13"><author>Dreves, Guido M.</author>, <author>Clemens Blume</author>,
              <author>H.M. Bannister</author>, <author>González-Blanco, Elena</author>, et al.
              <date>2013–</date>. <title level="m">ReMetCa: Repertorio métrico digital de la poesía
              medieval castellano [A Digital Repertory of Medieval Spanish Metrics]</title>. Last
            updated July 22, 2015. <ptr target="http://www.remetca.uned.es"/>.</bibl>
          <bibl xml:id="grijp"><author>Grijp, Louis</author>, et al. <title level="m">Dutch Song
              Database</title>. Meertens Institute, Royal Netherlands Academy of Arts and Sciences
            (KNAW). Accessed February 5, 2014. <ptr
              target="http://www.liederenbank.nl/index.php?lan=en"/>.</bibl>
          <bibl xml:id="horvath91"><author>Horváth, Iván</author>, et al. 1991–. <title level="m"
              >Répertoire de la poésie hongroise ancienne</title>. Eötvös Loránd University (ELTE).
            Accessed February 5, 2014. <ptr target="http://rpha.elte.hu/"/>.</bibl>
          <bibl xml:id="parkinson"><author>Parkinson, Stephen</author>, et al. <title level="m">The
              Oxford Cantigas de Santa Maria Database</title>. Oxford University. Accessed February
            5, 2014. <ptr target="http://csm.mml.ox.ac.uk/"/>.</bibl>
          <bibl xml:id="rauner"><author>Rauner, Erwin</author>. <title level="m">Analecta Hymnica
              Medii Aevi Digitalia</title>. Erwin Rauner Verlag. Accessed February 5, 2014. <ptr
              target="http://webserver.erwin-rauner.de/crophius/Analecta_conspectus.htm"/>.</bibl>
          <bibl xml:id="selaf"><author>Seláf, Levente</author>. <title level="m">Le Nouveau
              Naetebus: Poèmes strophiques non-lyriques en français des origines jusqu’à
              1400</title>. Accessed February 5, 2014. <ptr target="http://nouveaunaetebus.elte.hu/"
            />.</bibl>
        </listBibl>
      </div>
    </back>
  </text>
</TEI>
